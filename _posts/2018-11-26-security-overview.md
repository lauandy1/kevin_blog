---
layout: post
title: 加密通信
author: andy
tags:  mac
categories:  mac
excerpt: Install csshx on Mac OSX
---

* TOC
{:toc}

#概述

对称加密：在加密和解密时使用相同的密钥。

非对称加密：两个密钥，一个是公开密钥，另一个是私有密钥；一个用作加密的时候，另一个则用作解密。

#加密通信

0.A 想要发送消息给 B，但 A 和 B 没有安全可靠的沟通渠道

1.B 生成一对密钥——公钥 P 和私钥 S，并把 P 以任意方式发送给 A，或者直接公开 P 也可以

2.A 使用 P 对消息的明文 M 进行加密，得到密文 P(M)

3.A 将 P(M) 以任意方式发送给 B，即使途中被窃听，因为窃听者没有私钥 S，无法由 P(M) 得到明文

4.B 收到 P(M) 后用 S 解密，得到明文，即 S(P(M)) = M

5.实践中通常用上述过程交换对称加密的密钥，后续通信过程采用对称加密进行加密

#数字签名

0.A 想要发布消息 M，并提供一种方法，让接收者可以验证消息未被篡改

1.A 用 S 对 M 加密，得到 S(M)，把 S(M) 和 M 一起发布

2.接受者通过 P 对 S(M) 进行解密，得到原文 M，从而证实消息的完整性

3.实践中，通常先使用消息摘要算法对 M 进行摘要，再进行加密

#CA证书

上述加密流程中缺乏对公钥的认证机制，因此有可能出现针对公钥分发过程的攻击，比如 中间人攻击。
为了能够验证公钥 P 的合法性，引入 CA，即数字证书认证机构。CA 负责颁发、认证证书，同时 CA 也有自己的证书（内含公钥），供用户下载从而可以验证它签发的证书。如果用户信任的 CA 给 A 持有的证书（内含公钥）签名，那么用户就能够确认 A 的身份并信任 A。如果 A 作为 CA，就可以给其它证书签名，形成信任链。信任链的起点是根证书，操作系统、浏览器等软件通常会预置被信任的根证书。

#SSL

安全套接层协议，及其继任者传输层安全性协议（TLS），在传输层对网络连接进行加密，对应用层协议透明。HTTPS 即以 SSL 进行加密。
SSL 协议可以分为两层，SSL 记录协议和 SSL 握手协议。详见 传输层安全协议。

